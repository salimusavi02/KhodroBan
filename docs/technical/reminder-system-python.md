# Ø³ÛŒØ³ØªÙ… ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§ Ø¨Ø§ Python

## ğŸ“‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„ÛŒ

**ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯:** Û²Û· Ø¯ÛŒ Û±Û´Û°Û´  
**Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡:** Python Cron Job + Supabase + SPA + Telegram  
**Ù‡Ø¯Ù:** ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú†Ù†Ø¯Ú©Ø§Ù†Ø§Ù„Ù‡ (Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† + ØªÙ„Ú¯Ø±Ø§Ù…)

---

## ğŸ†• ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ (Ø¨Ø§ ØªÙ„Ú¯Ø±Ø§Ù…)

âœ… **Ø§Ø±Ø³Ø§Ù„ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…** - Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ø±Ùˆ Ù…ØªØµÙ„ Ú©Ù†Ù†Ø¯  
âœ… **Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ù†Ø§Ù„** - Ú©Ø§Ø±Ø¨Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú†Ø·ÙˆØ± ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ø¯  
âœ… **Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ¨Ø§** - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² HTML Ø¨Ø±Ø§ÛŒ Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§  
âœ… **Ø§ØªØµØ§Ù„ Ø§Ù…Ù†** - Ø°Ø®ÛŒØ±Ù‡ `chat_id` Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¨Ø§ RLS  
âœ… **Realtime + Telegram** - Ù‡Ù…Ø²Ù…Ø§Ù† Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯

---

## ğŸ¯ Ø³ÛŒÙ†Ø§Ø±ÛŒÙˆ Ùˆ Ù‡Ø¯Ù Ú©Ù„ÛŒ

### Ø³ÛŒÙ†Ø§Ø±ÛŒÙˆ:

- Ú©Ø§Ø±Ø¨Ø± **Ú†Ù†Ø¯ÛŒÙ† Ø®ÙˆØ¯Ø±Ùˆ** Ø¯Ø§Ø±Ø¯
- Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ **Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø¨Ø§ ÙØ§ØµÙ„Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù…ØªÙØ§ÙˆØª** Ø¯Ø§Ø±Ø¯ (Ù…Ø«Ù„Ø§Ù‹ Û¶Û°ØŒ Û¹Û° ÛŒØ§ Û±Û²Û° Ø±ÙˆØ²)
- Ø§ÛŒÙ† ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø± Ø¬Ø¯ÙˆÙ„ `reminder_settings` Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª
- Ú©Ø§Ø±Ø¨Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ø¯ **Ú†Ù†Ø¯ Ø±ÙˆØ² Ù‚Ø¨Ù„** Ø§Ø² Ù…ÙˆØ¹Ø¯ (Ù…Ø«Ù„Ø§Ù‹ Û· Ø±ÙˆØ²)ØŒ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ø¯
- ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚: **Ø§ÛŒÙ…ÛŒÙ„ + Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¯Ø±ÙˆÙ†â€ŒØ¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ**

### Ù‡Ø¯Ù:

- **Ø®ÙˆØ¯Ú©Ø§Ø±Ø³Ø§Ø²ÛŒ:** Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¯Ø³ØªÛŒ
- **Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ù‚ÛŒÙ‚:** Ø¨Ø±Ø±Ø³ÛŒ Ø±ÙˆØ²Ø§Ù†Ù‡
- **Ú†Ù†Ø¯Ú©Ø§Ù†Ø§Ù„Ù‡:** Ø§ÛŒÙ…ÛŒÙ„ + Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† + ØªÙ„Ú¯Ø±Ø§Ù…
- **Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…:** Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø®ØµÙˆØµ Ø¯Ø§Ø±Ø¯

---

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Python Cron Job (Ú†Ø§Ø¨Ú©Ø§Ù†)                                   â”‚
â”‚  - Ø§Ø¬Ø±Ø§: Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª Û¸ ØµØ¨Ø­                                   â”‚
â”‚  - ÙˆØ¸ÛŒÙÙ‡: Ø¨Ø±Ø±Ø³ÛŒ ÛŒØ§Ø¯Ø¢ÙˆØ±Ù‡Ø§ + Ø§ÛŒØ¬Ø§Ø¯ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†                â”‚
â”‚  - Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… (Ø§Ú¯Ø± ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase (Ø¯ÛŒØªØ§Ø¨ÛŒØ³)                                         â”‚
â”‚  - Ø¬Ø¯ÙˆÙ„ notifications (Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§)                       â”‚
â”‚  - Ø¬Ø¯ÙˆÙ„ telegram_settings (ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ú©Ø§Ø±Ø¨Ø±Ø§Ù†)          â”‚
â”‚  - Ø¬Ø¯ÙˆÙ„ reminder_settings (ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ)                â”‚
â”‚  - Ø¬Ø¯ÙˆÙ„ vehicles + services (Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SPA ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ (SvelteKit)                                   â”‚
â”‚  - Realtime Supabase (Ù†Ù…Ø§ÛŒØ´ ÙÙˆØ±ÛŒ)                           â”‚
â”‚  - notificationService.ts (Ø®ÙˆØ§Ù†Ø¯Ù† Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§)           â”‚
â”‚  - telegramService.ts (Ù…Ø¯ÛŒØ±ÛŒØª Ø§ØªØµØ§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…)                â”‚
â”‚  - UI Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª (Ù†Ù…Ø§ÛŒØ´ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram Bot API                                           â”‚
â”‚  - Ø§Ø±Ø³Ø§Ù„ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†                                 â”‚
â”‚  - Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² HTML Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† Ø²ÛŒØ¨Ø§                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ù…Ø±Ø§Ø­Ù„ Ø§Ø¬Ø±Ø§ (Û¶ Ù…Ø±Ø­Ù„Ù‡)

### Ù…Ø±Ø­Ù„Ù‡ Û±: ØªØºÛŒÛŒØ±Ø§Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Supabase

**ÙØ§ÛŒÙ„:** 

```sql
-- 1. Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ notifications
CREATE TABLE public.notifications (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
    vehicle_id BIGINT REFERENCES public.vehicles(vehicle_id),
    title TEXT NOT NULL,
    body TEXT,
    type VARCHAR(50) NOT NULL CHECK (type IN ('reminder', 'warning', 'info', 'subscription')),
    read BOOLEAN DEFAULT FALSE,
    metadata JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 2. ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† RLS
ALTER TABLE public.notifications ENABLE ROW LEVEL SECURITY;

-- 3. Ù¾Ø§Ù„ÛŒØ³ÛŒâ€ŒÙ‡Ø§
CREATE POLICY "Users can view their own notifications" ON public.notifications
    FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own notifications" ON public.notifications
    FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own notifications" ON public.notifications
    FOR UPDATE USING (auth.uid() = user_id);

-- 4. Indexâ€ŒÙ‡Ø§
CREATE INDEX idx_notifications_user_id ON public.notifications(user_id);
CREATE INDEX idx_notifications_created_at ON public.notifications(created_at DESC);
CREATE INDEX idx_notifications_vehicle_type ON public.notifications(vehicle_id, type);
CREATE INDEX idx_notifications_user_read ON public.notifications(user_id, read);

-- 5. ØªØ±ÛŒÚ¯Ø± updated_at
CREATE OR REPLACE FUNCTION public.handle_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER set_updated_at_notifications
    BEFORE UPDATE ON public.notifications
    FOR EACH ROW
    EXECUTE FUNCTION public.handle_updated_at();

-- 6. Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø³ØªÙˆÙ† reminder_mode Ø¨Ù‡ reminder_settings
ALTER TABLE public.reminder_settings 
ADD COLUMN IF NOT EXISTS reminder_mode VARCHAR(20) NOT NULL DEFAULT 'time' 
CHECK (reminder_mode IN ('km', 'time', 'both'));

ALTER TABLE public.reminder_settings 
ADD COLUMN IF NOT EXISTS is_enabled BOOLEAN NOT NULL DEFAULT TRUE;

-- 7. ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Realtime Ø¨Ø±Ø§ÛŒ notifications
ALTER TABLE public.notifications REPLICA IDENTITY FULL;

-- 8. Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§
COMMENT ON TABLE public.notifications IS 'Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ùˆ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§';

-- 9. ØªØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§ÛŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ
CREATE OR REPLACE FUNCTION public.get_vehicles_for_reminder()
RETURNS TABLE (
    vehicle_id BIGINT,
    user_id UUID,
    model VARCHAR,
    plate_number VARCHAR,
    interval_days INTEGER,
    interval_km INTEGER,
    warning_days_before INTEGER,
    warning_km_before INTEGER,
    reminder_mode VARCHAR,
    is_enabled BOOLEAN
) AS $$
BEGIN
    RETURN QUERY
    SELECT 
        v.vehicle_id,
        v.user_id,
        v.model,
        v.plate_number,
        rs.interval_days,
        rs.interval_km,
        rs.warning_days_before,
        rs.warning_km_before,
        rs.reminder_mode,
        rs.is_enabled
    FROM public.vehicles v
    JOIN public.reminder_settings rs ON v.vehicle_id = rs.vehicle_id
    WHERE rs.is_enabled = TRUE 
      AND rs.reminder_mode IN ('time', 'both');
END;
$$ LANGUAGE plpgsql;

-- 10. Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
CREATE TABLE public.telegram_settings (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
    chat_id TEXT UNIQUE,
    connection_code TEXT UNIQUE,  -- Ú©Ø¯ ÛŒÚ©ØªØ§ Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø±
    bot_token TEXT,
    is_enabled BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 11. ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† RLS Ø¨Ø±Ø§ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
ALTER TABLE public.telegram_settings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage their own telegram settings" ON public.telegram_settings
    FOR ALL USING (auth.uid() = user_id);

-- 12. Index Ø¨Ø±Ø§ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
CREATE INDEX idx_telegram_settings_user_id ON public.telegram_settings(user_id);
CREATE INDEX idx_telegram_settings_code ON public.telegram_settings(connection_code);

-- 13. ØªØ±ÛŒÚ¯Ø± updated_at Ø¨Ø±Ø§ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
CREATE TRIGGER set_updated_at_telegram_settings
    BEFORE UPDATE ON public.telegram_settings
    FOR EACH ROW
    EXECUTE FUNCTION public.handle_updated_at();

-- 14. Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§
COMMENT ON TABLE public.telegram_settings IS 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ØªØµØ§Ù„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…';
COMMENT ON COLUMN public.telegram_settings.connection_code IS 'Ú©Ø¯ ÛŒÚ©ØªØ§ Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…';
```

---

---

## ğŸ”„ Ø±ÙˆØ´ Û±: Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø§ Ú©Ø¯ ÛŒÚ©ØªØ§ (Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ)

Ø§ÛŒÙ† Ø±ÙˆØ´ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø¨Ø§ **ÛŒÚ© Ú©Ù„ÛŒÚ©** Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ù…ØªØµÙ„ Ø´ÙˆØ¯ØŒ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù¾ÛŒ/Ù¾ÛŒØ³Øª Ú©Ø¯.

### Ù…Ø²Ø§ÛŒØ§:
- âœ… **ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¹Ø§Ù„ÛŒ:** ÙÙ‚Ø· ÛŒÚ© Ø¯Ú©Ù…Ù‡ + Start
- âœ… **Ø§Ù…Ù†:** Ú©Ø¯ ÛŒÚ©ØªØ§ Ùˆ ÛŒÚ©â€ŒØ¨Ø§Ø± Ù…ØµØ±Ù
- âœ… **Ø³Ø±ÛŒØ¹:** Ø§ØªØµØ§Ù„ Ø¯Ø± Ú©Ù…ØªØ± Ø§Ø² Û³Û° Ø«Ø§Ù†ÛŒÙ‡
- âœ… **Ù‡ÙˆØ´Ù…Ù†Ø¯:** Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² Start

### Ù†Ø­ÙˆÙ‡ Ú©Ø§Ø±:
1. Ú©Ø§Ø±Ø¨Ø± Ø¯Ú©Ù…Ù‡ "Ø§ØªØµØ§Ù„" Ø±Ùˆ Ù…ÛŒâ€ŒØ²Ù†Ù‡
2. Ø³ÛŒØ³ØªÙ… Ú©Ø¯ ÛŒÚ©ØªØ§ Ù…ÛŒâ€ŒØ³Ø§Ø²Ù‡ (Ù…Ø«Ù„Ø§Ù‹ `X7K9P2R5`)
3. Ù„ÛŒÙ†Ú© Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ù‡: `t.me/your_bot?start=X7K9P2R5`
4. Ú©Ø§Ø±Ø¨Ø± Ù„ÛŒÙ†Ú© Ø±Ùˆ Ø¨Ø§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ù‡ Ùˆ Start Ù…ÛŒâ€ŒØ²Ù†Ù‡
5. Ø±Ø¨Ø§Øª Ú©Ø¯ Ø±Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ùˆ `chat_id` Ø±Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù‡
6. âœ… Ø§ØªØµØ§Ù„ Ú©Ø§Ù…Ù„ Ø´Ø¯!

---

### Ù…Ø±Ø­Ù„Ù‡ Û±.Ûµ: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³

Ù‚Ø¨Ù„ Ø§Ø² Ù…Ø±Ø­Ù„Ù‡ Û²ØŒ Ø¨Ø§ÛŒØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Python Ø±Ùˆ Ø¢Ù¾Ø¯ÛŒØª Ú©Ù†ÛŒÙ…:

**ÙØ§ÛŒÙ„: `requirements.txt` (Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯Ù‡)**
```
supabase==2.4.0
schedule==1.2.0
python-dotenv==1.0.0
requests==2.31.0
```

**ÙØ§ÛŒÙ„: `.env.example` (Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯Ù‡)**
```
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
CRON_TIME=08:00
TELEGRAM_BOT_TOKEN=your-telegram-bot-token  # Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
TELEGRAM_BOT_USERNAME=your_bot_username    # Ø§Ø®ØªÛŒØ§Ø±ÛŒ - Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ø¨Ø§Øª
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û²: Ú©Ø¯ Python Ø¨Ø±Ø§ÛŒ Cron Job (Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…)

**Ø³Ø§Ø®ØªØ§Ø± Ù¾ÙˆØ´Ù‡:**

```
reminder-service/
â”œâ”€â”€ main.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â””â”€â”€ Dockerfile (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
```

**ÙØ§ÛŒÙ„: `main.py`**

```python
import os
from supabase import create_client, Client
from datetime import datetime, timedelta
import schedule
import time
import logging
<<<<<<< HEAD
from dotenv import load_dotenv
import sys

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ Ø§Ø² ÙØ§ÛŒÙ„ .env
load_dotenv()
=======
import requests
>>>>>>> 8575c66 (feat: add GroupedSelect component for enhanced service and expense category selection)

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù„Ø§Ú¯
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s',
    handlers=[
        logging.StreamHandler(sys.stdout)
    ]
)

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ
SUPABASE_URL = os.environ.get("SUPABASE_URL")
SUPABASE_KEY = os.environ.get("SUPABASE_SERVICE_ROLE_KEY")
CRON_TIME = os.environ.get("CRON_TIME", "08:00")
TELEGRAM_BOT_TOKEN = os.environ.get("TELEGRAM_BOT_TOKEN")  # ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ
if not SUPABASE_URL:
    logging.error("âŒ Ø®Ø·Ø§: Ù…ØªØºÛŒØ± SUPABASE_URL ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª")
    sys.exit(1)

if not SUPABASE_KEY:
    logging.error("âŒ Ø®Ø·Ø§: Ù…ØªØºÛŒØ± SUPABASE_SERVICE_ROLE_KEY ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª")
    sys.exit(1)

# Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§ÛŒÙ†Øª Supabase
try:
    supabase: Client = create_client(SUPABASE_URL, SUPABASE_KEY)
    logging.info("âœ… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase Ø¨Ø±Ù‚Ø±Ø§Ø± Ø´Ø¯")
except Exception as e:
    logging.error(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase: {str(e)}")
    sys.exit(1)

def send_telegram_message(chat_id: str, message: str) -> bool:
    """
    Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø² Ø·Ø±ÛŒÙ‚ Bot API
    """
    if not TELEGRAM_BOT_TOKEN or not chat_id:
        logging.warning("ØªÙˆÚ©Ù† ØªÙ„Ú¯Ø±Ø§Ù… ÛŒØ§ chat_id Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª")
        return False
    
    try:
        url = f"https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendMessage"
        payload = {
            "chat_id": chat_id,
            "text": message,
            "parse_mode": "HTML"
        }
        
        response = requests.post(url, json=payload, timeout=10)
        
        if response.status_code == 200:
            logging.info(f"âœ… Ù¾ÛŒØ§Ù… ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ Ø¨Ù‡ {chat_id}")
            return True
        else:
            logging.error(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…: {response.status_code} - {response.text}")
            return False
            
    except Exception as e:
        logging.error(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…: {str(e)}")
        return False

def check_time_based_reminders():
    """
    Ø¨Ø±Ø±Ø³ÛŒ ÛŒØ§Ø¯Ø¢ÙˆØ±Ù‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ùˆ Ø§ÛŒØ¬Ø§Ø¯ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† + Ø§Ø±Ø³Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…
    Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…ØªÙØ§ÙˆØª Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ
    """
    logging.info("=" * 50)
    logging.info("Ø´Ø±ÙˆØ¹ Ø¨Ø±Ø±Ø³ÛŒ ÛŒØ§Ø¯Ø¢ÙˆØ±Ù‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ...")
  
    try:
        # Ø®ÙˆØ§Ù†Ø¯Ù† ØªÙ…Ø§Ù… Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø²Ù…Ø§Ù†ÛŒ
        vehicles_response = supabase.rpc('get_vehicles_for_reminder').execute()
    
        if not vehicles_response.data:
            logging.info("Ù‡ÛŒÚ† Ø®ÙˆØ¯Ø±ÙˆÛŒÛŒ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯")
            return
    
        logging.info(f"ØªØ¹Ø¯Ø§Ø¯ {len(vehicles_response.data)} Ø®ÙˆØ¯Ø±Ùˆ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ")
    
        for vehicle in vehicles_response.data:
            try:
                # Ø®ÙˆØ§Ù†Ø¯Ù† Ø¢Ø®Ø±ÛŒÙ† Ø³Ø±ÙˆÛŒØ³
                last_service = supabase.table("services") \
                    .select("*") \
                    .eq("vehicle_id", vehicle["vehicle_id"]) \
                    .order("service_date_gregorian", desc=True) \
                    .limit(1) \
                    .execute()
            
                if not last_service.data:
                    logging.warning(f"Ø®ÙˆØ¯Ø±Ùˆ {vehicle['model']} - Ø³Ø±ÙˆÛŒØ³ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡")
                    continue
            
                last_date = datetime.strptime(
                    last_service.data[0]["service_date_gregorian"], 
                    "%Y-%m-%d"
                ).date()
            
                # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù…Ø§Ù†Ø¯Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ
                days_since_last = (datetime.now().date() - last_date).days
                interval_days = vehicle["interval_days"]  # Ù…ØªÙØ§ÙˆØª Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ
                days_until_due = interval_days - days_since_last
            
                # Ø¨Ø±Ø±Ø³ÛŒ Ø¢ÛŒØ§ Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ù‡Ø´Ø¯Ø§Ø± Ø§Ø³ØªØŸ
                warning_days = vehicle["warning_days_before"]
            
                if 0 < days_until_due <= warning_days:
                    # Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ù…ÙˆØ¹Ø¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±
                    due_date = last_date + timedelta(days=interval_days)
                    today = datetime.now().date()
                  
                    # Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…ÙˆØ¹Ø¯ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯
                    # Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ vehicle_id Ùˆ days_until_due Ø¯Ø± metadata
                    existing = supabase.table("notifications") \
                        .select("*") \
                        .eq("vehicle_id", vehicle["vehicle_id"]) \
                        .eq("type", "reminder") \
                        .eq("read", False) \
                        .gte("created_at", (datetime.now() - timedelta(days=warning_days + 1)).isoformat()) \
                        .execute()
                
                    # Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¨Ø§ Ù‡Ù…Ø§Ù† days_until_due ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
                    notification_exists = False
                    if existing.data:
                        for notif in existing.data:
                            metadata = notif.get("metadata", {})
                            if metadata.get("days_until_due") == days_until_due:
                                notification_exists = True
                                break
                
                    if notification_exists:
                        logging.info(f"âœ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡: {vehicle['model']} - {days_until_due} Ø±ÙˆØ² Ù…Ø§Ù†Ø¯Ù‡")
                        continue
                
                    # Ø§ÛŒØ¬Ø§Ø¯ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†
                    notification = {
                        "user_id": vehicle["user_id"],
                        "vehicle_id": vehicle["vehicle_id"],
                        "title": "ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ",
                        "body": f"Ø®ÙˆØ¯Ø±Ùˆ {vehicle['model']} ({vehicle['plate_number']}) Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±Ø¯. {days_until_due} Ø±ÙˆØ² ØªØ§ Ù…ÙˆØ¹Ø¯ ({interval_days} Ø±ÙˆØ²) Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡ Ø§Ø³Øª.",
                        "type": "reminder",
                        "metadata": {
                            "vehicle_model": vehicle["model"],
                            "plate_number": vehicle["plate_number"],
                            "days_until_due": days_until_due,
                            "interval_days": interval_days,
                            "last_service_date": last_service.data[0]["service_date_gregorian"],
                            "due_date": (last_date + timedelta(days=interval_days)).isoformat()
                        }
                    }
                
                    result = supabase.table("notifications").insert(notification).execute()
                
                    if result.data:
                        logging.info(f"âœ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯: {vehicle['model']} - {days_until_due} Ø±ÙˆØ² Ù…Ø§Ù†Ø¯Ù‡ (Ù…ÙˆØ¹Ø¯: {interval_days} Ø±ÙˆØ²)")
                        
                        # Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… (Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± ØªÙ†Ø¸ÛŒÙ… Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯)
                        telegram_settings = supabase.table("telegram_settings") \
                            .select("chat_id") \
                            .eq("user_id", vehicle["user_id"]) \
                            .eq("is_enabled", True) \
                            .limit(1) \
                            .execute()
                        
                        if telegram_settings.data:
                            chat_id = telegram_settings.data[0]["chat_id"]
                            
                            # Ø³Ø§Ø®Øª Ù¾ÛŒØ§Ù… Ø²ÛŒØ¨Ø§
                            message = f"""
ğŸš¨ <b>ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø®ÙˆØ¯Ø±Ùˆ</b> ğŸš¨

ğŸš— <b>Ø®ÙˆØ¯Ø±Ùˆ:</b> {vehicle['model']}
ğŸ”¢ <b>Ù¾Ù„Ø§Ú©:</b> {vehicle['plate_number']}
ğŸ“… <b>Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡:</b> {days_until_due} Ø±ÙˆØ²
â±ï¸ <b>Ù…ÙˆØ¹Ø¯ Ø§ØµÙ„ÛŒ:</b> {interval_days} Ø±ÙˆØ²
ğŸ“ <b>Ø¢Ø®Ø±ÛŒÙ† Ø³Ø±ÙˆÛŒØ³:</b> {last_service.data[0]["service_date_gregorian"]}

âš ï¸ Ù„Ø·ÙØ§Ù‹ Ø¨Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø§Ù‚Ø¯Ø§Ù… Ú©Ù†ÛŒØ¯!
                            """
                            
                            send_telegram_message(chat_id, message)
                        else:
                            logging.info(f"â„¹ï¸ Ú©Ø§Ø±Ø¨Ø± {vehicle['user_id']} ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ù†Ø¯Ø§Ø±Ø¯")
                    else:
                        logging.error(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†: {vehicle['model']}")
            
            except Exception as e:
                logging.error(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø®ÙˆØ¯Ø±Ùˆ {vehicle.get('model', 'unknown')}: {str(e)}")
                logging.exception("Ø¬Ø²Ø¦ÛŒØ§Øª Ø®Ø·Ø§:")
                continue
    
        logging.info("âœ… Ù¾Ø§ÛŒØ§Ù† Ø¨Ø±Ø±Ø³ÛŒ ÛŒØ§Ø¯Ø¢ÙˆØ±Ù‡Ø§")
        logging.info("=" * 50)
    
    except Exception as e:
        logging.error(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§: {str(e)}")
        logging.exception("Ø¬Ø²Ø¦ÛŒØ§Øª Ø®Ø·Ø§:")

def main():
    """
    Ø§Ø¬Ø±Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡
    """
    logging.info("Ø³Ø±ÙˆÛŒØ³ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø´Ø±ÙˆØ¹ Ø´Ø¯...")
    logging.info(f"Ø²Ù…Ø§Ù† Ø§Ø¬Ø±Ø§: {CRON_TIME}")
<<<<<<< HEAD
  
=======
    logging.info(f"ØªÙ„Ú¯Ø±Ø§Ù… Ø±Ø¨Ø§Øª: {'âœ… ÙØ¹Ø§Ù„' if TELEGRAM_BOT_TOKEN else 'âŒ ØºÛŒØ±ÙØ¹Ø§Ù„'}")
    
>>>>>>> 8575c66 (feat: add GroupedSelect component for enhanced service and expense category selection)
    # ØªÙ†Ø¸ÛŒÙ… Cron Job
    schedule.every().day.at(CRON_TIME).do(check_time_based_reminders)
  
    # Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª
    logging.info("Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª...")
    check_time_based_reminders()
  
    # Ø­Ù„Ù‚Ù‡ Ø§ØµÙ„ÛŒ
    while True:
        schedule.run_pending()
        time.sleep(60)

if __name__ == "__main__":
    main()
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û².Ûµ: Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)

**ÙØ§ÛŒÙ„: `bot.py`**
```python
import os
import logging
from telegram import Update
from telegram.ext import Application, CommandHandler, ContextTypes
from supabase import create_client, Client

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª
SUPABASE_URL = os.environ.get("SUPABASE_URL")
SUPABASE_KEY = os.environ.get("SUPABASE_SERVICE_ROLE_KEY")
BOT_TOKEN = os.environ.get("TELEGRAM_BOT_TOKEN")

supabase: Client = create_client(SUPABASE_URL, SUPABASE_KEY)

logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """
    Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª Ùˆ Ø°Ø®ÛŒØ±Ù‡ chat_id Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ø¯ ÛŒÚ©ØªØ§
    Ù…Ø«Ø§Ù„: /start ABC123XYZ
    """
    user = update.effective_user
    chat_id = str(update.effective_chat.id)
    
    # Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯ Ø§Ø² Ù¾Ø§Ø±Ø§Ù…ØªØ± start
    if context.args and len(context.args) > 0:
        connection_code = context.args[0]
        
        # Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ú©Ø¯ ÛŒÚ©ØªØ§
        result = supabase.table("telegram_settings") \
            .select("user_id") \
            .eq("connection_code", connection_code) \
            .eq("is_enabled", False) \
            .single() \
            .execute()
        
        if result.data:
            user_id = result.data["user_id"]
            
            # Ø°Ø®ÛŒØ±Ù‡ chat_id Ùˆ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ
            supabase.table("telegram_settings") \
                .update({
                    "chat_id": chat_id,
                    "is_enabled": True,
                    "connection_code": None  # Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø¯ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡
                }) \
                .eq("user_id", user_id) \
                .execute()
            
            logging.info(f"âœ… Ú©Ø§Ø±Ø¨Ø± {user_id} Ø¨Ø§ chat_id {chat_id} Ù…ØªØµÙ„ Ø´Ø¯")
            
            await update.message.reply_text(
                "âœ… Ø§ØªØµØ§Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!\n\n"
                "Ø­Ø§Ù„Ø§ Ù‡Ø± Ø±ÙˆØ² ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø®ÙˆØ¯Ø±Ùˆ Ø±Ùˆ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯.\n"
                "Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø¨Ø±Ù†Ø§Ù…Ù‡ KhodroBan ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯."
            )
        else:
            await update.message.reply_text(
                "âŒ Ú©Ø¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.\n\n"
                "Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ KhodroBan Ø§Ù‚Ø¯Ø§Ù… Ú©Ù†ÛŒØ¯:\n"
                "1. Ø¨Ù‡ Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø±ÙˆÛŒØ¯\n"
                "2. Ø±ÙˆÛŒ 'Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…' Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯\n"
                "3. Ø¯Ú©Ù…Ù‡ Start Ø±Ùˆ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø²Ù†ÛŒØ¯"
            )
    else:
        # Ø§Ú¯Ø± Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯
        await update.message.reply_text(
            "Ø³Ù„Ø§Ù…! ğŸ‘‹\n\n"
            "Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø±Ø¨Ø§Øª Ø¨Ù‡ Ø­Ø³Ø§Ø¨ KhodroBan Ø®ÙˆØ¯:\n"
            "1. Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ KhodroBan Ø¨Ø±ÙˆÛŒØ¯\n"
            "2. Ø¨Ù‡ Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø±ÙˆÛŒØ¯\n"
            "3. Ø±ÙˆÛŒ 'Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…' Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯\n"
            "4. Ø¯Ú©Ù…Ù‡ Start Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯\n\n"
            "Ø§ØªØµØ§Ù„ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯!"
        )

async def status(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„"""
    chat_id = str(update.effective_chat.id)
    
    # Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ chat_id
    result = supabase.table("telegram_settings") \
        .select("user_id, is_enabled") \
        .eq("chat_id", chat_id) \
        .eq("is_enabled", True) \
        .single() \
        .execute()
    
    if result.data:
        await update.message.reply_text(
            "âœ… ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„: ÙØ¹Ø§Ù„\n\n"
            f"Ú©Ø§Ø±Ø¨Ø±: {result.data['user_id']}\n"
            "Ø­Ø§Ù„Ø§ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ Ø±Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯!"
        )
    else:
        await update.message.reply_text(
            "âŒ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„: ØºÛŒØ±ÙØ¹Ø§Ù„\n\n"
            "Ù„Ø·ÙØ§Ù‹ Ø§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡ KhodroBan Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø§Ù‚Ø¯Ø§Ù… Ú©Ù†ÛŒØ¯."
        )

def main():
    """Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª"""
    if not BOT_TOKEN:
        logging.error("ØªÙˆÚ©Ù† ØªÙ„Ú¯Ø±Ø§Ù… ÛŒØ§ÙØª Ù†Ø´Ø¯!")
        return
    
    application = Application.builder().token(BOT_TOKEN).build()
    
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CommandHandler("status", status))
    
    logging.info("Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§...")
    logging.info("Ù…Ù†ØªØ¸Ø± Ø¯Ø³ØªÙˆØ± /start Ùˆ /status")
    application.run_polling()

if __name__ == "__main__":
    main()
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û³: ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Python

**ÙØ§ÛŒÙ„: `requirements.txt`**

```
supabase==2.4.0
schedule==1.2.0
python-dotenv==1.0.0
```

**ÙØ§ÛŒÙ„: `.env.example`**

```
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
CRON_TIME=08:00
```

**ÙØ§ÛŒÙ„: `Dockerfile` (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)**

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY main.py .

CMD ["python", "main.py"]
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û´: ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ (SPA)

**ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯: `frontend/src/lib/services/notificationService.ts`**

```typescript
import { supabase } from '../supabase';
import type { Notification } from '$lib/types';

export const notificationService = {
  // Ø®ÙˆØ§Ù†Ø¯Ù† Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
  async getNotifications(userId: string, onlyUnread: boolean = true): Promise<Notification[]> {
    if (!supabase) {
      throw new Error('Supabase client not available. Check VITE_BACKEND_TYPE and environment variables.');
    }

    let query = supabase
      .from('notifications')
      .select('*')
      .eq('user_id', userId)
      .order('created_at', { ascending: false })
      .limit(50);

    if (onlyUnread) {
      query = query.eq('read', false);
    }

    const { data, error } = await query;

    if (error) throw error;
    return data || [];
  },

  // Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø®ÙˆØ§Ù†Ø¯Ù‡â€ŒØ´Ø¯Ù‡
  async markAsRead(notificationId: string): Promise<void> {
    if (!supabase) {
      throw new Error('Supabase client not available. Check VITE_BACKEND_TYPE and environment variables.');
    }

    const { error } = await supabase
      .from('notifications')
      .update({ read: true })
      .eq('id', notificationId);

    if (error) throw error;
  },

  // Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ù‡ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø®ÙˆØ§Ù†Ø¯Ù‡â€ŒØ´Ø¯Ù‡
  async markAllAsRead(userId: string): Promise<void> {
    if (!supabase) {
      throw new Error('Supabase client not available. Check VITE_BACKEND_TYPE and environment variables.');
    }

    const { error } = await supabase
      .from('notifications')
      .update({ read: true })
      .eq('user_id', userId)
      .eq('read', false);

    if (error) throw error;
  },

  // Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù† Ø¨Ù‡ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ (Realtime)
  subscribeToNotifications(userId: string, callback: (notification: Notification) => void) {
    if (!supabase) {
      console.error('Supabase client not available. Realtime subscription will not work.');
      return null;
    }

    const channel = supabase
      .channel('public:notifications')
      .on(
        'postgres_changes',
        {
          event: 'INSERT',
          schema: 'public',
          table: 'notifications',
          filter: `user_id=eq.${userId}`
        },
        (payload) => {
          callback(payload.new as Notification);
        }
      )
      .subscribe();

    return channel;
  },

  // Ø´Ù…Ø§Ø±Ø´ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ unread
  async getUnreadCount(userId: string): Promise<number> {
    if (!supabase) {
      throw new Error('Supabase client not available. Check VITE_BACKEND_TYPE and environment variables.');
    }

    const { count, error } = await supabase
      .from('notifications')
      .select('*', { count: 'exact' })
      .eq('user_id', userId)
      .eq('read', false);

    if (error) throw error;
    return count || 0;
  }
};
```

**ÙØ§ÛŒÙ„: `frontend/src/lib/types/index.ts`**

```typescript
export interface Notification {
  id: string;
  user_id: string;
  vehicle_id?: number;
  title: string;
  body: string;
  type: 'reminder' | 'warning' | 'info' | 'subscription';
  read: boolean;
  metadata?: any;
  created_at: string;
  updated_at: string;
}

export interface TelegramSettings {
  id: string;
  user_id: string;
  chat_id?: string;
  bot_token?: string;
  is_enabled: boolean;
  created_at: string;
  updated_at: string;
}
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û´.Ûµ: Ø³Ø±ÙˆÛŒØ³ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø±Ø§ÛŒ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯

**ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯: `frontend/src/lib/services/telegramService.ts`**
```typescript
import { supabase } from '../supabase';
import type { TelegramSettings } from '$lib/types';

export const telegramService = {
  // Ø§ÛŒØ¬Ø§Ø¯ Ù„ÛŒÙ†Ú© Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø§ Ú©Ø¯ ÛŒÚ©ØªØ§
  async getTelegramLink(userId: string): Promise<string> {
    // Ú†Ú© Ú©Ø±Ø¯Ù† Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ù…ØªØµÙ„ Ø¨ÙˆØ¯Ù‡ ÛŒØ§ Ù†Ù‡
    const { data: existing } = await supabase
      .from('telegram_settings')
      .select('chat_id, is_enabled')
      .eq('user_id', userId)
      .single();

    if (existing?.chat_id && existing.is_enabled) {
      return `https://t.me/${import.meta.env.VITE_TELEGRAM_BOT_USERNAME || 'your_bot'}`;
    }

    // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø¯ ÛŒÚ©ØªØ§ Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„
    const connectionCode = Math.random().toString(36).substring(2, 10).toUpperCase();
    
    // Ø°Ø®ÛŒØ±Ù‡ Ú©Ø¯ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
    await supabase
      .from('telegram_settings')
      .upsert({
        user_id: userId,
        connection_code: connectionCode,
        is_enabled: false,
        updated_at: new Date().toISOString()
      });

    // Ø³Ø§Ø®Øª Ù„ÛŒÙ†Ú© Ø¨Ø§ Ú©Ø¯
    const botUsername = import.meta.env.VITE_TELEGRAM_BOT_USERNAME || 'your_bot';
    return `https://t.me/${botUsername}?start=${connectionCode}`;
  },

  // Ú†Ú© Ú©Ø±Ø¯Ù† ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„
  async checkConnection(userId: string): Promise<boolean> {
    const { data } = await supabase
      .from('telegram_settings')
      .select('chat_id, is_enabled')
      .eq('user_id', userId)
      .single();

    return !!data?.chat_id && data.is_enabled;
  },

  // Ø¯Ø±ÛŒØ§ÙØª ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ø§Ù…Ù„
  async getSettings(userId: string): Promise<TelegramSettings | null> {
    const { data } = await supabase
      .from('telegram_settings')
      .select('*')
      .eq('user_id', userId)
      .single();

    return data;
  },

  // ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ØªÙ„Ú¯Ø±Ø§Ù…
  async toggleTelegram(userId: string, enabled: boolean): Promise<void> {
    const { error } = await supabase
      .from('telegram_settings')
      .upsert({
        user_id: userId,
        is_enabled: enabled,
        updated_at: new Date().toISOString()
      });

    if (error) throw error;
  },

  // Ø°Ø®ÛŒØ±Ù‡ chat_id (Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªØµØ§Ù„ Ù…ÙˆÙÙ‚)
  async saveChatId(userId: string, chatId: string): Promise<void> {
    const { error } = await supabase
      .from('telegram_settings')
      .upsert({
        user_id: userId,
        chat_id: chatId,
        is_enabled: true,
        updated_at: new Date().toISOString()
      });

    if (error) throw error;
  },

  // Ø­Ø°Ù Ø§ØªØµØ§Ù„
  async disconnect(userId: string): Promise<void> {
    const { error } = await supabase
      .from('telegram_settings')
      .update({ 
        is_enabled: false, 
        chat_id: null,
        connection_code: null 
      })
      .eq('user_id', userId);

    if (error) throw error;
  },

  // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± UI
  async getConnectionStatus(userId: string): Promise<{
    isConnected: boolean;
    hasCode: boolean;
    chatId?: string;
    code?: string;
  }> {
    const { data } = await supabase
      .from('telegram_settings')
      .select('chat_id, connection_code, is_enabled')
      .eq('user_id', userId)
      .single();

    if (!data) {
      return { isConnected: false, hasCode: false };
    }

    return {
      isConnected: !!data.chat_id && data.is_enabled,
      hasCode: !!data.connection_code,
      chatId: data.chat_id || undefined,
      code: data.connection_code || undefined
    };
  }
};
```

---

### Ù…Ø±Ø­Ù„Ù‡ Ûµ: ØªØºÛŒÛŒØ±Ø§Øª UI (Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ùˆ ØªÙ„Ú¯Ø±Ø§Ù…)

**ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯: `frontend/src/lib/components/organisms/NotificationBell.svelte`**

```svelte
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { notificationService } from '$lib/services/notificationService';
  import { authStore, currentUser } from '$lib/stores/auth';
  import { supabase } from '$lib/supabase';
  import { writable } from 'svelte/store';
  import type { Notification } from '$lib/types';

  let notifications = writable<Notification[]>([]);
  let unreadCount = writable(0);
  let isOpen = $state(false);
  let realtimeChannel: any = null;

  onMount(async () => {
    const user = $currentUser;
  
    if (user?.id) {
      await loadNotifications(user.id);
  
      realtimeChannel = notificationService.subscribeToNotifications(
        user.id,
        (newNotification) => {
          notifications.update(list => [newNotification, ...list]);
          unreadCount.update(c => c + 1);
          showToast(newNotification.title, newNotification.body);
        }
      );
    }
  });

  onDestroy(() => {
    if (realtimeChannel && supabase) {
      supabase.removeChannel(realtimeChannel);
    }
  });

  async function loadNotifications(userId: string) {
    try {
      const data = await notificationService.getNotifications(userId, true);
      notifications.set(data);
  
      const count = await notificationService.getUnreadCount(userId);
      unreadCount.set(count);
    } catch (error) {
      console.error('Error loading notifications:', error);
    }
  }

  async function markAsRead(id: string) {
    try {
      await notificationService.markAsRead(id);
      notifications.update(list => list.filter(n => n.id !== id));
      unreadCount.update(c => Math.max(0, c - 1));
    } catch (error) {
      console.error('Error marking as read:', error);
    }
  }

  async function markAllAsRead() {
    const user = $currentUser;
    if (!user?.id) return;
  
    try {
      await notificationService.markAllAsRead(user.id);
      notifications.set([]);
      unreadCount.set(0);
    } catch (error) {
      console.error('Error marking all as read:', error);
    }
  }

  function showToast(title: string, body: string) {
    // Ø¯Ø± ØµÙˆØ±Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² toast system Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² toastStore Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
    // ÛŒØ§ ÛŒÚ© toast component Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø³Ø§Ø²ÛŒØ¯
    const toast = document.createElement('div');
    toast.className = 'toast-notification';
    toast.innerHTML = `
      <strong>${title}</strong>
      <p>${body}</p>
    `;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 5000);
  }

  $: user = $currentUser;
  $: userId = user?.id;
</script>

<div class="notification-bell">
  <button on:click={() => isOpen = !isOpen} class="bell-btn">
    ğŸ””
    {#if $unreadCount > 0}
      <span class="badge">{$unreadCount}</span>
    {/if}
  </button>

  {#if isOpen}
    <div class="notification-dropdown">
      <div class="header">
        <h3>Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§</h3>
        <button on:click={markAllAsRead}>Ù‡Ù…Ù‡ Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯</button>
      </div>
  
      <div class="list">
        {#if $notifications.length === 0}
          <p class="empty">Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¬Ø¯ÛŒØ¯ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
        {:else}
          {#each $notifications as notification}
            <div class="notification-item" on:click={() => markAsRead(notification.id)}>
              <strong>{notification.title}</strong>
              <p>{notification.body}</p>
              <small>{new Date(notification.created_at).toLocaleString('fa-IR')}</small>
            </div>
          {/each}
        {/if}
      </div>
    </div>
  {/if}
</div>

<style>
  .notification-bell { position: relative; }
  .bell-btn { position: relative; font-size: 1.5rem; background: none; border: none; cursor: pointer; }
  .badge { position: absolute; top: -5px; right: -5px; background: red; color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.75rem; display: flex; align-items: center; justify-content: center; }
  .notification-dropdown { position: absolute; top: 100%; right: 0; width: 350px; background: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000; }
  .header { padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
  .list { max-height: 400px; overflow-y: auto; }
  .notification-item { padding: 12px; border-bottom: 1px solid #f5f5f5; cursor: pointer; }
  .notification-item:hover { background: #f9f9f9; }
  .empty { padding: 20px; text-align: center; color: #999; }
</style>
```

**Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯:**

```svelte
<!-- frontend/src/routes/dashboard/+page.svelte -->
<script>
  import NotificationBell from '$lib/components/organisms/NotificationBell.svelte';
  import TelegramSettings from '$lib/components/organisms/TelegramSettings.svelte';
</script>

<div class="dashboard">
  <header>
    <h1>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</h1>
    <div class="header-actions">
      <NotificationBell />
    </div>
  </header>
  
  <main>
    <!-- Ø¨Ù‚ÛŒÙ‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
    
    <!-- Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… -->
    <section class="settings-section">
      <TelegramSettings />
    </section>
  </main>
</div>
```

**ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯: `frontend/src/lib/components/organisms/TelegramSettings.svelte`**
```svelte
<script lang="ts">
  import { onMount } from 'svelte';
  import { telegramService } from '$lib/services/telegramService';
  import { userStore } from '$lib/stores/auth';

  let isConnected = false;
  let isLoading = true;
  let telegramLink = '';
  let connectionCode = '';
  let error: string | null = null;
  let showCopyButton = false;

  onMount(async () => {
    if ($userStore) {
      await loadSettings();
    }
  });

  async function loadSettings() {
    if (!$userStore) return;
    
    try {
      isLoading = true;
      const status = await telegramService.getConnectionStatus($userStore.id);
      
      isConnected = status.isConnected;
      
      if (!status.isConnected) {
        telegramLink = await telegramService.getTelegramLink($userStore.id);
        connectionCode = status.code || '';
        showCopyButton = !!status.code;
      }
      
      error = null;
    } catch (err) {
      error = 'Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª';
      console.error(err);
    } finally {
      isLoading = false;
    }
  }

  async function disconnect() {
    if (!$userStore) return;
    
    try {
      await telegramService.disconnect($userStore.id);
      isConnected = false;
      telegramLink = await telegramService.getTelegramLink($userStore.id);
      showCopyButton = false;
      connectionCode = '';
      error = null;
    } catch (err) {
      error = 'Ø®Ø·Ø§ Ø¯Ø± Ù‚Ø·Ø¹ Ø§ØªØµØ§Ù„';
      console.error(err);
    }
  }

  async function reconnect() {
    if (!$userStore) return;
    
    try {
      // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø¯ Ø¬Ø¯ÛŒØ¯
      telegramLink = await telegramService.getTelegramLink($userStore.id);
      
      // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ú©Ø¯
      const status = await telegramService.getConnectionStatus($userStore.id);
      connectionCode = status.code || '';
      showCopyButton = !!status.code;
      
      error = null;
    } catch (err) {
      error = 'Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ù…Ø¬Ø¯Ø¯';
      console.error(err);
    }
  }

  function copyCode() {
    if (connectionCode) {
      navigator.clipboard.writeText(connectionCode);
      // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙ‚Øª
      const btn = document.querySelector('.copy-btn') as HTMLElement;
      if (btn) {
        const originalText = btn.textContent;
        btn.textContent = 'âœ… Ú©Ù¾ÛŒ Ø´Ø¯!';
        setTimeout(() => {
          btn.textContent = originalText;
        }, 2000);
      }
    }
  }
</script>

<div class="telegram-settings">
  <h3>ğŸ”” Ø§ØªØµØ§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…</h3>
  <p class="description">
    Ø¨Ø§ Ø§ØªØµØ§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…ØŒ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±ÙˆÛŒØ³ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
  </p>

  {#if isLoading}
    <div class="loading">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
  {:else if error}
    <div class="error">{error}</div>
  {:else if isConnected}
    <div class="connected">
      <div class="status-badge connected">âœ… Ù…ØªØµÙ„</div>
      <p>Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… ÙØ¹Ø§Ù„ Ø§Ø³Øª Ùˆ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯.</p>
      <div class="actions">
        <button on:click={disconnect} class="btn btn-danger">
          Ù‚Ø·Ø¹ Ø§ØªØµØ§Ù„
        </button>
        <a href="https://t.me/{import.meta.env.VITE_TELEGRAM_BOT_USERNAME || 'your_bot'}" 
           target="_blank" 
           class="btn btn-secondary">
          Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø±Ø¨Ø§Øª
        </a>
      </div>
    </div>
  {:else}
    <div class="disconnected">
      <div class="status-badge disconnected">âŒ ØºÛŒØ±Ù…ØªØµÙ„</div>
      
      <div class="connect-steps">
        <div class="step">
          <span class="step-number">Û±</span>
          <span>Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</span>
        </div>
        <div class="step">
          <span class="step-number">Û²</span>
          <span>Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…ØŒ Ø¯Ú©Ù…Ù‡ Start Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯</span>
        </div>
        <div class="step">
          <span class="step-number">Û³</span>
          <span>Ø§ØªØµØ§Ù„ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯</span>
        </div>
      </div>

      <a href={telegramLink} target="_blank" class="btn btn-primary">
        Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
      </a>

      {#if showCopyButton && connectionCode}
        <div class="code-section">
          <p class="code-label">Ú©Ø¯ ÛŒÚ©ØªØ§ÛŒ Ø´Ù…Ø§:</p>
          <div class="code-box">
            <code>{connectionCode}</code>
            <button on:click={copyCode} class="btn copy-btn">
              Ú©Ù¾ÛŒ Ú©Ø¯
            </button>
          </div>
          <small>Ø§Ú¯Ø± Ù„ÛŒÙ†Ú© Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§ÛŒÙ† Ú©Ø¯ Ø±Ùˆ Ø¯Ø± Ø±Ø¨Ø§Øª Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯</small>
        </div>
      {/if}
      
      <button on:click={reconnect} class="btn btn-secondary">
        Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒÙ†Ú© Ø¬Ø¯ÛŒØ¯
      </button>
    </div>
  {/if}

  <div class="info-box">
    <strong>ğŸ’¡ Ù†Ú©ØªÙ‡:</strong>
    <ul>
      <li>ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ Û· Ø±ÙˆØ² Ù‚Ø¨Ù„ Ø§Ø² Ù…ÙˆØ¹Ø¯ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
      <li>Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ ÙÙ‚Ø· Ø¯Ú©Ù…Ù‡ Start Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯</li>
      <li>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù‡Ù…Ø²Ù…Ø§Ù† Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¯Ø±ÙˆÙ†â€ŒØ¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ§ÛŒ Ù‡Ù… Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯</li>
    </ul>
  </div>
</div>

<style>
  .telegram-settings {
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    background: linear-gradient(135deg, #f9f9ff 0%, #f0f4ff 100%);
    max-width: 600px;
  }

  h3 {
    margin: 0 0 8px 0;
    color: #1a1a1a;
  }

  .description {
    color: #666;
    font-size: 0.9rem;
    margin-bottom: 16px;
  }

  .loading, .error {
    padding: 12px;
    text-align: center;
    border-radius: 6px;
    margin: 8px 0;
  }

  .loading {
    background: #e3f2fd;
    color: #1976d2;
  }

  .error {
    background: #ffebee;
    color: #c62828;
  }

  .connected, .disconnected {
    padding: 16px;
    background: white;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
  }

  .status-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: bold;
    margin-bottom: 8px;
  }

  .status-badge.connected {
    background: #e8f5e9;
    color: #2e7d32;
  }

  .status-badge.disconnected {
    background: #ffebee;
    color: #c62828;
  }

  .actions {
    display: flex;
    gap: 8px;
    margin-top: 12px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 8px 16px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    text-decoration: none;
    display: inline-block;
    text-align: center;
    transition: all 0.2s;
  }

  .btn-primary {
    background: #0088cc;
    color: white;
    width: 100%;
    margin: 8px 0;
  }

  .btn-primary:hover {
    background: #006699;
  }

  .btn-secondary {
    background: #6c757d;
    color: white;
  }

  .btn-secondary:hover {
    background: #5a6268;
  }

  .btn-danger {
    background: #dc3545;
    color: white;
  }

  .btn-danger:hover {
    background: #c82333;
  }

  .copy-btn {
    background: #28a745;
    color: white;
    padding: 6px 12px;
    font-size: 0.85rem;
  }

  .copy-btn:hover {
    background: #218838;
  }

  .connect-steps {
    background: white;
    padding: 12px;
    border-radius: 6px;
    margin: 12px 0;
    border: 1px dashed #ccc;
  }

  .step {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 6px 0;
    font-size: 0.9rem;
  }

  .step-number {
    background: #0088cc;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
  }

  .code-section {
    background: #f8f9fa;
    padding: 12px;
    border-radius: 6px;
    margin: 12px 0;
    border: 1px solid #dee2e6;
  }

  .code-label {
    margin: 0 0 6px 0;
    font-weight: bold;
    font-size: 0.9rem;
  }

  .code-box {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-bottom: 6px;
  }

  .code-box code {
    background: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    border: 1px solid #ced4da;
    font-family: monospace;
    font-size: 1.1rem;
    font-weight: bold;
    color: #0088cc;
    flex: 1;
  }

  .code-section small {
    color: #666;
    font-size: 0.8rem;
  }

  .info-box {
    background: #fff3cd;
    border: 1px solid #ffc107;
    border-radius: 6px;
    padding: 12px;
    margin-top: 12px;
    font-size: 0.85rem;
  }

  .info-box ul {
    margin: 8px 0 0 0;
    padding-left: 20px;
  }

  .info-box li {
    margin: 4px 0;
  }
</style>
```

---

### Ù…Ø±Ø­Ù„Ù‡ Û¶: Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø± Ú†Ø§Ø¨Ú©Ø§Ù†

**Ø§Ù„Ù) Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø±ÙˆÛŒØ³ Python:**

1. ÙˆØ§Ø±Ø¯ Ù¾Ù†Ù„ Ú†Ø§Ø¨Ú©Ø§Ù† Ø´ÙˆÛŒØ¯
2. Ø¨Ù‡ Ø¨Ø®Ø´ **Ù‡Ø§Ø³Øª Ø§Ø¨Ø±ÛŒ (PaaS)** Ø¨Ø±ÙˆÛŒØ¯
3. Ø±ÙˆÛŒ **Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯** Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
4. Ø§Ù†ØªØ®Ø§Ø¨: **Python**
5. ØªÙ†Ø¸ÛŒÙ…Ø§Øª:
   - Ù†Ø§Ù…: `reminder-service`
   - Ù…Ù†Ø¨Ø¹: Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Python
   - Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ: Ø§Ø² `.env` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

**Ø¨) ØªÙ†Ø¸ÛŒÙ… Cron Job Ø¯Ø± Ú†Ø§Ø¨Ú©Ø§Ù†:**

- Ø¯Ø± Ø¨Ø®Ø´ **Cron Jobs** Ù¾Ù†Ù„ Ú†Ø§Ø¨Ú©Ø§Ù†
- Ø§ÛŒØ¬Ø§Ø¯ Cron Ø¬Ø¯ÛŒØ¯:
  - Ø²Ù…Ø§Ù†: `0 8 * * *` (Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª Û¸ ØµØ¨Ø­)
  - Ø¯Ø³ØªÙˆØ±: `python main.py`
  - Ù…Ø³ÛŒØ±: Ù¾ÙˆØ´Ù‡ Ø³Ø±ÙˆÛŒØ³

**Ø¬) Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):**
1. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø±Ø¨Ø§Øª Ø±Ùˆ Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø®ÙˆØ¯ØªÙˆÙ† Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
2. ÛŒØ§ Ø§Ø² Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø±Ø§ÛŒÚ¯Ø§Ù† Ù…Ø«Ù„ PythonAnywhere Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
3. ÛŒØ§ Ø§Ø² Render.com Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø±Ø§ÛŒÚ¯Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

**Ø¯) Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²:**
```bash
# Ø¨Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³ Python
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
CRON_TIME=08:00
TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
TELEGRAM_BOT_USERNAME=your_bot_username

# Ø¨Ø±Ø§ÛŒ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯
VITE_TELEGRAM_BOT_USERNAME=your_bot_username
```

---

## âœ… Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ

**ÙˆÙ‚ØªÛŒ Ù‡Ù…Ù‡ Ù…Ø±Ø§Ø­Ù„ Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯:**

1. **Ù‡Ø± Ø±ÙˆØ² Ø³Ø§Ø¹Øª Û¸ ØµØ¨Ø­:**

   - Python Cron Job Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - Ø®ÙˆØ¯Ø±ÙˆÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ù‡Ø´Ø¯Ø§Ø± Ù‡Ø³ØªÙ†Ø¯ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
   - Ø¨Ø± Ø§Ø³Ø§Ø³ `interval_days` Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
   - Ø¯Ø± Ø¬Ø¯ÙˆÙ„ `notifications` Ø±Ú©ÙˆØ±Ø¯ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
<<<<<<< HEAD
=======
   - **Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± ØªÙ„Ú¯Ø±Ø§Ù… ÙØ¹Ø§Ù„ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ù¾ÛŒØ§Ù… Ù‡Ù… Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯**

>>>>>>> 8575c66 (feat: add GroupedSelect component for enhanced service and expense category selection)
2. **Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡:**

   - Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø±Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ø¯ (Realtime)
   - **Ø§Ú¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯ØŒ Ù¾ÛŒØ§Ù… Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ù‡Ù… Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯**
   - Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø±ÙˆÛŒ Ø¢Ù† Ú©Ù„ÛŒÚ© Ú©Ù†Ø¯ Ùˆ Ø¬Ø²Ø¦ÛŒØ§Øª Ø±Ø§ Ø¨Ø¨ÛŒÙ†Ø¯
3. **Ù…Ø²Ø§ÛŒØ§:**

   - âœ… Ø®ÙˆØ¯Ú©Ø§Ø± Ùˆ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø³ØªÛŒ
   - âœ… Realtime (Ø¨Ø¯ÙˆÙ† Ø±ÙØ±Ø´ ØµÙØ­Ù‡)
   - âœ… **Ú†Ù†Ø¯Ú©Ø§Ù†Ø§Ù„Ù‡:** Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† + ØªÙ„Ú¯Ø±Ø§Ù…
   - âœ… Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±
   - âœ… Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø®ØµÙˆØµ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø§Ø±Ø¯
   - âœ… Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ÙØ¹Ù„ÛŒ Ø¯Ø³Øª Ù†Ù…ÛŒâ€ŒØ®ÙˆØ±Ù†Ø¯
   - âœ… **Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ù†Ø§Ù„ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±**

---

## ğŸ“¦ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²

### Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ø§ØµÙ„ÛŒ:

```
<<<<<<< HEAD
OilChenger/
â”œâ”€â”€ supabase/migrations/004_notifications.sql
=======
KhodroBan/
â”œâ”€â”€ supabase/migrations/002_notifications.sql
>>>>>>> 8575c66 (feat: add GroupedSelect component for enhanced service and expense category selection)
â””â”€â”€ frontend/src/
    â”œâ”€â”€ lib/services/
    â”‚   â”œâ”€â”€ notificationService.ts
    â”‚   â””â”€â”€ telegramService.ts
    â”œâ”€â”€ lib/types/index.ts
    â””â”€â”€ lib/components/organisms/
        â”œâ”€â”€ NotificationBell.svelte
        â””â”€â”€ TelegramSettings.svelte
```

<<<<<<< HEAD
### Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯ (Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡):

=======
### Ø³Ø±ÙˆÛŒØ³ Python (Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡):
>>>>>>> 8575c66 (feat: add GroupedSelect component for enhanced service and expense category selection)
```
reminder-service/
â”œâ”€â”€ main.py          # Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
â”œâ”€â”€ bot.py           # Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
â”œâ”€â”€ requirements.txt # Ø¨Ø§ requests
â”œâ”€â”€ .env.example     # Ø¨Ø§ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…
â””â”€â”€ Dockerfile
```

---

## ğŸ”§ Ø¯Ø³ØªÙˆØ±Ø§Ù„Ø¹Ù…Ù„ Ø§Ø¬Ø±Ø§

### Û±. Ø§Ø¬Ø±Ø§ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³:

```bash
# Ø¯Ø± Supabase SQL Editor Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
# ÛŒØ§ Ø§Ø² CLI Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
supabase migration up
```

### Û². Ø§Ø¬Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³ Python (Ù„ÙˆÚ©Ø§Ù„):

```bash
cd reminder-service

# Ù†ØµØ¨ dependencies
pip install -r requirements.txt

# Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† ÙØ§ÛŒÙ„ .env.example Ø¨Ù‡ .env Ùˆ Ù¾Ø± Ú©Ø±Ø¯Ù† Ù…Ù‚Ø§Ø¯ÛŒØ±
cp .env.example .env
# Ø³Ù¾Ø³ .env Ø±Ø§ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯ Ùˆ SUPABASE_URL Ùˆ SUPABASE_SERVICE_ROLE_KEY Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯

# Ø§Ø¬Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³
python main.py
```

<<<<<<< HEAD
**Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:**

- Ø¨Ø±Ø§ÛŒ ØªØ³ØªØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ `CRON_TIME` Ø±Ø§ Ø¨Ù‡ Ø²Ù…Ø§Ù† ÙØ¹Ù„ÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„Ø§Ù‹ 2 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¯ÛŒÚ¯Ø±)
- Ø¨Ø±Ø§ÛŒ productionØŒ Ø§Ø² cron ÙˆØ§Ù‚Ø¹ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒØ¹Ø§Ù…Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø§Ø² scheduler Ø³Ø±ÙˆÛŒØ³ cloud Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

### Û³. Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø± Ú†Ø§Ø¨Ú©Ø§Ù†:

- ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯
- Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯
=======
### Û³. Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):
```bash
# Ø¯Ø± ØªØ±Ù…ÛŒÙ†Ø§Ù„ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
cd reminder-service
python bot.py
```

### Û´. Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø± Ú†Ø§Ø¨Ú©Ø§Ù†:
- ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Python Ø±Ø§ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯
- Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯ (Ù…Ø®ØµÙˆØµØ§Ù‹ `TELEGRAM_BOT_TOKEN`)
>>>>>>> 8575c66 (feat: add GroupedSelect component for enhanced service and expense category selection)
- Cron Job Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯
- **Ù†Ú©ØªÙ‡:** Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø±ÙˆÛŒ Ù‡Ù…Ø§Ù† Ø³Ø±ÙˆØ± ÛŒØ§ Ø³Ø±ÙˆØ± Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯

### Ûµ. ØªÙ†Ø¸ÛŒÙ… ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯:
```bash
cd frontend
npm install
# Ø¯Ø± .env ÙØ§ÛŒÙ„:
VITE_TELEGRAM_BOT_USERNAME=your_bot_username
```

---

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…

### Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø±Ø¨Ø§Øª:
1. Ø¨Ù‡ `@BotFather` Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ù¾ÛŒØ§Ù… Ø¨Ø¯ÛŒØ¯
2. Ø¯Ø³ØªÙˆØ± `/newbot` Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯
3. Ù†Ø§Ù… Ùˆ ÛŒÙˆØ²Ø±Ù†ÛŒÙ… Ø±Ø¨Ø§Øª Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„Ø§Ù‹ `KhodroBanReminderBot`)
4. ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø±Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯
5. ØªÙˆÚ©Ù† Ø±Ùˆ Ø¯Ø± `.env` ÙØ§ÛŒÙ„ Ø³Ø±ÙˆÛŒØ³ Python Ù‚Ø±Ø§Ø± Ø¨Ø¯ÛŒØ¯:
   ```
   TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
   TELEGRAM_BOT_USERNAME=KhodroBanReminderBot
   ```

### ğŸ”„ Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ú©Ø§Ø±Ø¨Ø± (Ø±ÙˆØ´ Û±):

**Ù…Ø±Ø§Ø­Ù„ Ú©Ø§Ù…Ù„:**

1. **Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯:**
   - Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…ÛŒâ€ŒØ±ÙˆØ¯
   - Ø¨Ù‡ Ø¨Ø®Ø´ **ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…** Ù…ÛŒâ€ŒØ±ÙˆØ¯
   - Ø±ÙˆÛŒ **"Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…"** Ú©Ù„ÛŒÚ© Ù…ÛŒâ€ŒÚ©Ù†Ø¯

2. **Ø³ÛŒØ³ØªÙ… Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø±:**
   - ÛŒÚ© **Ú©Ø¯ ÛŒÚ©ØªØ§** (Ù…Ø«Ù„Ø§Ù‹ `X7K9P2R5`) Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
   - Ú©Ø¯ Ø±Ùˆ Ø¯Ø± Ø¬Ø¯ÙˆÙ„ `telegram_settings` Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
   - Ù„ÛŒÙ†Ú© Ø§ØªØµØ§Ù„ Ø±Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯: `t.me/KhodroBanReminderBot?start=X7K9P2R5`

3. **Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…:**
   - Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ú©Ù„ÛŒÚ© Ù…ÛŒâ€ŒÚ©Ù†Ø¯
   - Ø¯Ú©Ù…Ù‡ **Start** Ø±Ùˆ Ù…ÛŒâ€ŒØ²Ù†Ø¯
   - **Ø±Ø¨Ø§Øª Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø±** Ú©Ø¯ Ø±Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ù‡

4. **Ø±Ø¨Ø§Øª:**
   - Ú©Ø¯ Ø±Ùˆ Ø¨Ø§ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ú†Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡
   - `chat_id` Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ø§ `user_id` Ù…Ú† Ù…ÛŒâ€ŒÚ©Ù†Ù‡
   - Ø§ØªØµØ§Ù„ Ø±Ùˆ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù‡
   - Ù¾ÛŒØ§Ù… ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡

5. **Ù†ØªÛŒØ¬Ù‡:**
   - âœ… Ú©Ø§Ø±Ø¨Ø± Ù…ØªØµÙ„ Ø´Ø¯Ù‡
   - âœ… ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ Ø§Ø² Ø§ÛŒÙ† Ø¨Ù‡ Ø¨Ø¹Ø¯ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ù‡Ù… Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯

### ğŸ“‹ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ø¨Ø§Øª:

**`/start <code>`** - Ø§ØªØµØ§Ù„ Ø¨Ø§ Ú©Ø¯ ÛŒÚ©ØªØ§
```
/start X7K9P2R5
```

**`/status`** - Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„
```
/status
```

### ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…:
```bash
# Û±. Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª
cd reminder-service
python bot.py

# Û². Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ù‡ Ø±Ø¨Ø§Øª Ù¾ÛŒØ§Ù… Ø¨Ø¯ÛŒØ¯
# Û³. Ø¯Ø³ØªÙˆØ± /status Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯
# Û´. Ø¨Ø§ÛŒØ¯ ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ Ù†Ø´ÙˆÙ† Ø¨Ø¯Ù‡
```

### ğŸ¯ Ú¯Ø±Ø¯Ø´ Ú©Ø§Ø± Ú©Ø§Ù…Ù„:

```
Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± KhodroBan
    â†“
Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ "Ø§ØªØµØ§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…"
    â†“
Ø³ÛŒØ³ØªÙ… Ú©Ø¯ ÛŒÚ©ØªØ§ Ù…ÛŒâ€ŒØ³Ø§Ø²Ù‡ (X7K9P2R5)
    â†“
Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ (telegram_settings)
    â†“
Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒÙ†Ú©: t.me/your_bot?start=X7K9P2R5
    â†“
Ú©Ø§Ø±Ø¨Ø± Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ú©Ù„ÛŒÚ© + Start
    â†“
Ø±Ø¨Ø§Øª Ú©Ø¯ Ø±Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ù‡
    â†“
Ø±Ø¨Ø§Øª Ú†Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡: Ú©Ø¯ Ù…Ø¹ØªØ¨Ø±Ù‡ØŸ
    â†“
Ø¨Ù„Ù‡ â†’ Ø°Ø®ÛŒØ±Ù‡ chat_id + ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ
    â†“
Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ØªØ£ÛŒÛŒØ¯ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±
    â†“
âœ… Ø§ØªØµØ§Ù„ Ú©Ø§Ù…Ù„ Ø´Ø¯!
```

---

## âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

### Û±. Ø§Ù…Ù†ÛŒØª:
- âœ… ØªÙˆÚ©Ù† ØªÙ„Ú¯Ø±Ø§Ù… ÙÙ‚Ø· Ø¯Ø± Ø³Ø±ÙˆØ± Python (Ù†Ù‡ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯)
- âœ… `chat_id` Ø¨Ø§ RLS Ù…Ø­Ø§ÙØ¸Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯
- âœ… Ú©Ø¯ ÛŒÚ©ØªØ§ ÙÙ‚Ø· ÛŒÚ©â€ŒØ¨Ø§Ø± Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª
- âœ… Ú©Ø¯ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯

### Û². Ù‡Ø²ÛŒÙ†Ù‡:
- âœ… Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ØªÙ„Ú¯Ø±Ø§Ù… **Ø±Ø§ÛŒÚ¯Ø§Ù†** Ø§Ø³Øª
- âœ… Ù…Ø­Ø¯ÙˆØ¯ÛŒØª: Û³Û° Ù¾ÛŒØ§Ù…/Ø«Ø§Ù†ÛŒÙ‡ (Ú©Ø§ÙÛŒÙ‡)
- âœ… Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ù†ÛŒØ³Øª (Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø±ÙˆÛŒ Ù‡Ù…ÙˆÙ† Ø³Ø±ÙˆØ± Ø¨Ø§Ø´Ù‡)

### Û³. Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬:
- âŒ **Ú©Ø¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø±:** Ú©Ø§Ø±Ø¨Ø± Ú©Ø¯ Ø±Ùˆ Ø§Ø´ØªØ¨Ø§Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù‡
- âŒ **Ú©Ø¯ Ù…Ù†Ù‚Ø¶ÛŒ:** Ú©Ø¯ Ø¨ÛŒØ´ØªØ± Ø§Ø² Û²Û´ Ø³Ø§Ø¹Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡
- âŒ **Ø±Ø¨Ø§Øª Ø§Ø¬Ø±Ø§ Ù†Ø´Ø¯Ù‡:** Ø¨Ø§ÛŒØ¯ `python bot.py` Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø¨Ø§Ø´Ù‡

### Û´. ØªØ³Øª:
```bash
# ØªØ³Øª Ú©Ø§Ù…Ù„ Ø§ØªØµØ§Ù„:
# Û±. Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª
python bot.py

# Û². Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ù‡ Ø±Ø¨Ø§Øª Ù¾ÛŒØ§Ù… Ø¨Ø¯ÛŒØ¯
# Û³. Ø¯Ø³ØªÙˆØ± /status Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯
# Û´. Ø¨Ø§ÛŒØ¯ "ØºÛŒØ±Ù…ØªØµÙ„" Ù†Ø´ÙˆÙ† Ø¨Ø¯Ù‡

# Û´. Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ØŒ Ø¯Ú©Ù…Ù‡ Ø§ØªØµØ§Ù„ Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯
# Ûµ. Ù„ÛŒÙ†Ú© Ø±Ùˆ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯ Ùˆ Start Ø¨Ø²Ù†ÛŒØ¯
# Û¶. Ø¯ÙˆØ¨Ø§Ø±Ù‡ /status Ø¨Ø²Ù†ÛŒØ¯ â†’ Ø¨Ø§ÛŒØ¯ "Ù…ØªØµÙ„" Ù†Ø´ÙˆÙ† Ø¨Ø¯Ù‡
```

### Ûµ. Ú¯Ø±Ø¯Ø´ Ú©Ø§Ø± ØªÙˆØ³Ø¹Ù‡:
```
Ù„ÙˆÚ©Ø§Ù„ ØªÙˆØ³Ø¹Ù‡:
    â†“
python bot.py (Ø¯Ø± ØªØ±Ù…ÛŒÙ†Ø§Ù„ Û±)
    â†“
npm run dev (Ø¯Ø± ØªØ±Ù…ÛŒÙ†Ø§Ù„ Û²)
    â†“
ØªØ³Øª Ø§ØªØµØ§Ù„
    â†“
Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø± Ú†Ø§Ø¨Ú©Ø§Ù†
```

---

## ğŸ¯ Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆØ´ Û± (Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø±)

**Ù…Ø²Ø§ÛŒØ§:**
- âœ… **Ø³Ø±ÛŒØ¹:** ÙÙ‚Ø· ÛŒÚ© Ø¯Ú©Ù…Ù‡ + Start
- âœ… **Ø³Ø§Ø¯Ù‡:** Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ú©Ù¾ÛŒ/Ù¾ÛŒØ³Øª Ú©Ø¯ Ù†ÛŒØ³Øª
- âœ… **Ø§Ù…Ù†:** Ú©Ø¯ ÛŒÚ©ØªØ§ Ùˆ ÛŒÚ©â€ŒØ¨Ø§Ø± Ù…ØµØ±Ù
- âœ… **Ù‡ÙˆØ´Ù…Ù†Ø¯:** Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² Start

**Ù…Ø¹Ø§ÛŒØ¨:**
- âš ï¸ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª Ø¯Ø± Ø²Ù…Ø§Ù† Ø§ØªØµØ§Ù„
- âš ï¸ Ú©Ø¯ Ø¨Ø¹Ø¯ Ø§Ø² Û²Û´ Ø³Ø§Ø¹Øª Ù…Ù†Ù‚Ø¶ÛŒ Ù…ÛŒâ€ŒØ´Ù‡ (Ù†ÛŒØ§Ø² Ø¨Ù‡ Refresh)

**Ù†ØªÛŒØ¬Ù‡:** Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´ Ø¨Ø±Ø§ÛŒ MVP! ğŸš€

---

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ùˆ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

<<<<<<< HEAD
Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ù…Ø´Ú©Ù„:

1. **Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Python:** Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase ÛŒØ§ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø§Ø¯Ù‡
2. **Ø¯ÛŒØªØ§Ø¨ÛŒØ³:** Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø¯ÙˆÙ„ `notifications` Ø¯Ø± Supabase Dashboard
3. **ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯:** Ú©Ù†Ø³ÙˆÙ„ Ù…Ø±ÙˆØ±Ú¯Ø± Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ Realtime ÛŒØ§ Supabase
4. **RLS Policies:** Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ Ù¾Ø§Ù„ÛŒØ³ÛŒâ€ŒÙ‡Ø§ÛŒ RLS Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
5. **Service Role Key:** Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Service Role Key (Ù†Ù‡ anon key) Ø¯Ø± Python
6. **Realtime:** Ø¨Ø±Ø±Ø³ÛŒ ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Realtime Ø¨Ø±Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ `notifications` Ø¯Ø± Supabase Dashboard

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬:

**Ù…Ø´Ú©Ù„:** Python Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Supabase Ù…ØªØµÙ„ Ø´ÙˆØ¯

- **Ø±Ø§Ù‡â€ŒØ­Ù„:** Ø¨Ø±Ø±Ø³ÛŒ `SUPABASE_URL` Ùˆ `SUPABASE_SERVICE_ROLE_KEY` Ø¯Ø± `.env`

**Ù…Ø´Ú©Ù„:** Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

- **Ø±Ø§Ù‡â€ŒØ­Ù„:** Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªØµØ§Ù„ Realtime Ø¯Ø± Supabase Dashboard â†’ Replication

**Ù…Ø´Ú©Ù„:** RLS Policy Ø®Ø·Ø§ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

- **Ø±Ø§Ù‡â€ŒØ­Ù„:** Ø¨Ø±Ø§ÛŒ Python Ø¨Ø§ÛŒØ¯ Ø§Ø² Service Role Key Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯ Ú©Ù‡ RLS Ø±Ø§ Ø¯ÙˆØ± Ù…ÛŒâ€ŒØ²Ù†Ø¯

---

## âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…

1. **Service Role Key:** Ù‡Ø±Ú¯Ø² Service Role Key Ø±Ø§ Ø¯Ø± frontend Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ú©Ù†ÛŒØ¯! ÙÙ‚Ø· Ø¯Ø± backend/Python
2. **Cron Job:** Ø¯Ø± production Ø§Ø² cron ÙˆØ§Ù‚Ø¹ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒØ¹Ø§Ù…Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ØŒ Ù†Ù‡ `schedule` library
3. **Migration:** Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ migration Ø¯Ø± productionØŒ ÛŒÚ© backup Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¨Ú¯ÛŒØ±ÛŒØ¯
4. **Performance:** Indexâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ú©Ø§Ø±Ø§ÛŒÛŒ Ø¯Ø± queryâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø¶Ø±ÙˆØ±ÛŒ Ù‡Ø³ØªÙ†Ø¯
5. **Error Handling:** Ú©Ø¯ Python Ø¨Ø§ error handling Ú©Ø§Ù…Ù„ Ù†ÙˆØ´ØªÙ‡ Ø´Ø¯Ù‡ ØªØ§ Ø¯Ø± ØµÙˆØ±Øª Ø®Ø·Ø§ crash Ù†Ú©Ù†Ø¯

---

**ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ:** Û²Û· Ø¯ÛŒ Û±Û´Û°Û´
**ÙˆØ¶Ø¹ÛŒØª:** âœ… Ø¢Ù…Ø§Ø¯Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ
**Ù†Ú©ØªÙ‡ Ú©Ù„ÛŒØ¯ÛŒ:** Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ `interval_days` Ù…Ø®ØµÙˆØµ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø§Ø² Ø¬Ø¯ÙˆÙ„ `reminder_settings` Ø®ÙˆØ§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
=======
### Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬:

**Û±. Ø®Ø·Ø§ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…:**
- Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Python Ø±Ùˆ Ú†Ú© Ú©Ù†ÛŒØ¯
- Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ `TELEGRAM_BOT_TOKEN` Ø¯Ø±Ø³ØªÙ‡
- Ø±Ø¨Ø§Øª Ø±Ùˆ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… `@BotFather` Ú†Ú© Ú©Ù†ÛŒØ¯

**Û². Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¯Ø±ÛŒØ§ÙØª Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯:**
- Ø¬Ø¯ÙˆÙ„ `notifications` Ø¯Ø± Supabase Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯
- Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Cron Job Ø±Ùˆ Ú†Ú© Ú©Ù†ÛŒØ¯
- Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ `reminder_settings` ÙØ¹Ø§Ù„Ù‡

**Û³. ØªÙ„Ú¯Ø±Ø§Ù… Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù‡:**
- Ø±Ø¨Ø§Øª Ø¨Ø§ÛŒØ¯ Ø§ÙˆÙ„ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø¬Ø±Ø§ Ø¨Ø´Ù‡
- Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ÛŒØ¯ Ø¯Ú©Ù…Ù‡ Start Ø±Ùˆ Ø¨Ø²Ù†Ù‡
- `chat_id` Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø´Ù‡

### Ù„Ø§Ú¯â€ŒÚ¯ÛŒØ±ÛŒ:
```bash
# Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Python
tail -f reminder-service.log

# Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Supabase
Ø¯Ø± Ù¾Ù†Ù„ Supabase > Database > SQL Editor
SELECT * FROM notifications ORDER BY created_at DESC LIMIT 10;

# Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
# Ø¯Ø± ØªØ±Ù…ÛŒÙ†Ø§Ù„ÛŒ Ú©Ù‡ bot.py Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡ØŒ Ø®Ø±ÙˆØ¬ÛŒ Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯
```

---

## ğŸ§ª ØªØ³Øª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…

### ØªØ³Øª Û±: Ø§ØªØµØ§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…

**Ù…Ø±Ø§Ø­Ù„:**
1. **Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª:**
   ```bash
   cd reminder-service
   python bot.py
   ```

2. **Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯:**
   - Ù„Ø§Ú¯ÛŒÙ† Ú©Ù†ÛŒØ¯
   - Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¨Ø±ÛŒØ¯
   - Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
   - Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ "Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…"

3. **Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…:**
   - Ù„ÛŒÙ†Ú© Ø±Ùˆ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯
   - Ø¯Ú©Ù…Ù‡ **Start** Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯
   - Ù¾ÛŒØ§Ù… ØªØ£ÛŒÛŒØ¯ Ø±Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯

4. **Ú†Ú© Ú©Ø±Ø¯Ù†:**
   ```sql
   -- Ø¯Ø± Supabase SQL Editor
   SELECT * FROM telegram_settings WHERE user_id = 'your-user-id';
   -- Ø¨Ø§ÛŒØ¯ chat_id Ù¾Ø± Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯
   ```

### ØªØ³Øª Û²: Ø§Ø±Ø³Ø§Ù„ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ

**Ù…Ø±Ø§Ø­Ù„:**
1. **Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø®ÙˆØ¯Ø±Ùˆ:**
   - Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ ÛŒÚ© Ø®ÙˆØ¯Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
   - ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ: Û³Û° Ø±ÙˆØ²ØŒ Ù‡Ø´Ø¯Ø§Ø± Û· Ø±ÙˆØ² Ù‚Ø¨Ù„

2. **Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø³Ø±ÙˆÛŒØ³:**
   - ØªØ§Ø±ÛŒØ® Ø³Ø±ÙˆÛŒØ³: Û²Ûµ Ø±ÙˆØ² Ù¾ÛŒØ´
   - (ÛŒØ¹Ù†ÛŒ Ûµ Ø±ÙˆØ² ØªØ§ Ù…ÙˆØ¹Ø¯ØŒ Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ù‡Ø´Ø¯Ø§Ø±)

3. **Ø§Ø¬Ø±Ø§ÛŒ Cron Job:**
   ```bash
   python main.py
   ```

4. **Ú†Ú© Ú©Ø±Ø¯Ù†:**
   - âœ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
   - âœ… Ù¾ÛŒØ§Ù… Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…
   - âœ… Ù„Ø§Ú¯â€ŒÙ‡Ø§: "âœ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯"

### ØªØ³Øª Û³: Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÚ©Ø±Ø§Ø±

**Ù…Ø±Ø§Ø­Ù„:**
1. Cron Job Ø±Ùˆ Ø¯ÙˆØ¨Ø§Ø± Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
2. Ø¨Ø§ÛŒØ¯ Ù„Ø§Ú¯ Ø¨Ú¯Ù‡: "âœ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡"

---

## ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù…ÙˆÙÙ‚ÛŒØª

**ÙˆÙ‚ØªÛŒ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¯Ø±Ø³ØªÙ‡:**

```
âœ… Ø¯ÛŒØªØ§Ø¨ÛŒØ³: Ø¬Ø¯ÙˆÙ„â€ŒÙ‡Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù†Ø¯
âœ… Ø±Ø¨Ø§Øª: Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ùˆ Ù¾Ø§Ø³Ø®Ú¯Ùˆ
âœ… Cron Job: Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯
âœ… Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†: Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯
âœ… ØªÙ„Ú¯Ø±Ø§Ù…: Ù¾ÛŒØ§Ù… Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
âœ… ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯: Realtime Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯
```

**Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ÛŒ Ø¨ÙˆØ¯:**
1. Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø±Ùˆ Ú†Ú© Ú©Ù†ÛŒØ¯
2. Ø¬Ø¯ÙˆÙ„â€ŒÙ‡Ø§ Ø±Ùˆ Ø¯Ø± Supabase Ø¨Ø¨ÛŒÙ†ÛŒØ¯
3. ØªÙˆÚ©Ù† ØªÙ„Ú¯Ø±Ø§Ù… Ø±Ùˆ Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯
4. Ø±Ø¨Ø§Øª Ø±Ùˆ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… `@BotFather` Ú†Ú© Ú©Ù†ÛŒØ¯

---

---

## ğŸ”§ Ù†Ú©Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡

### Û±. Ø§Ù†Ù‚Ø¶Ø§ÛŒ Ú©Ø¯:
```typescript
// Ø¯Ø± Ø³Ø±ÙˆÛŒØ³ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ú©Ø¯ Ø±Ùˆ Ø¨Ø¹Ø¯ Ø§Ø² Û²Û´ Ø³Ø§Ø¹Øª Ù…Ù†Ù‚Ø¶ÛŒ Ú©Ù†ÛŒØ¯
const EXPIRY_HOURS = 24;

// Ø¯Ø± Ø±Ø¨Ø§ØªØŒ Ú†Ú© Ú©Ù†ÛŒØ¯ Ú©Ø¯ Ù…Ù†Ù‚Ø¶ÛŒ Ù†Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯
const codeAge = (Date.now() - codeCreatedTime) / (1000 * 60 * 60);
if (codeAge > EXPIRY_HOURS) {
    // Ú©Ø¯ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡
}
```

### Û². Ø§Ø±Ø³Ø§Ù„ Ú¯Ø±ÙˆÙ‡ÛŒ:
```python
# Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ú†Ù†Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ù‡Ù…Ø²Ù…Ø§Ù† Ú†Ú© Ú©Ù†ÛŒØ¯
for user_id in users_needing_reminder:
    # Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø±
    pass
```

### Û³. Webhook (Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Polling):
```python
# Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¨Ù‡ØªØ±ØŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ø§Ø² Webhook Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
# Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¯Ø§ÙˆÙ… Python Ù†ÛŒØ³Øª
```

### Û´. Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§:
```python
# Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Retry Logic
for attempt in range(3):
    try:
        send_telegram_message(chat_id, message)
        break
    except:
        time.sleep(2)
```

---

## ğŸ“¦ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù†Ù‡Ø§ÛŒÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²

### Ù¾Ø±ÙˆÚ˜Ù‡ Ø§ØµÙ„ÛŒ (KhodroBan):
```
KhodroBan/
â”œâ”€â”€ supabase/migrations/002_notifications.sql  # Ø¨Ø§ connection_code
â”œâ”€â”€ frontend/src/
â”‚   â”œâ”€â”€ lib/services/
â”‚   â”‚   â”œâ”€â”€ notificationService.ts
â”‚   â”‚   â””â”€â”€ telegramService.ts  # Ø¨Ø§ getTelegramLink Ø®ÙˆØ¯Ú©Ø§Ø±
â”‚   â”œâ”€â”€ lib/types/index.ts      # Ø¨Ø§ TelegramSettings
â”‚   â””â”€â”€ lib/components/organisms/
â”‚       â”œâ”€â”€ NotificationBell.svelte
â”‚       â””â”€â”€ TelegramSettings.svelte  # Ø¨Ø§ Ú©Ø¯ ÛŒÚ©ØªØ§
â””â”€â”€ frontend/.env
    â””â”€â”€ VITE_TELEGRAM_BOT_USERNAME=your_bot
```

### Ø³Ø±ÙˆÛŒØ³ Python:
```
reminder-service/
â”œâ”€â”€ main.py          # Ø¨Ø§ Ø§Ø±Ø³Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…
â”œâ”€â”€ bot.py           # Ø¨Ø§ /start <code> Ùˆ /status
â”œâ”€â”€ requirements.txt # supabase, schedule, requests
â”œâ”€â”€ .env.example     # Ø¨Ø§ TELEGRAM_BOT_TOKEN
â””â”€â”€ Dockerfile
```

---

## ğŸ¯ Ø®Ù„Ø§ØµÙ‡ Ø§Ø¬Ø±Ø§ÛŒÛŒ

**Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§:**

1. **SQL:** Ø§Ø¬Ø±Ø§ÛŒ `002_notifications.sql`
2. **Python:** 
   ```bash
   pip install -r requirements.txt
   python bot.py      # ØªØ±Ù…ÛŒÙ†Ø§Ù„ Û±
   python main.py     # ØªØ±Ù…ÛŒÙ†Ø§Ù„ Û²
   ```
3. **ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯:**
   ```bash
   cd frontend
   npm install
   npm run dev
   ```
4. **ØªØ³Øª:**
   - Ù„Ø§Ú¯ÛŒÙ† Ú©Ù†ÛŒØ¯
   - Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø±ÛŒØ¯
   - Ø¯Ú©Ù…Ù‡ Ø§ØªØµØ§Ù„ Ø±Ùˆ Ø¨Ø²Ù†ÛŒØ¯
   - Ù„ÛŒÙ†Ú© Ø±Ùˆ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯ Ùˆ Start Ø¨Ø²Ù†ÛŒØ¯
   - ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø±Ùˆ ØªØ³Øª Ú©Ù†ÛŒØ¯

---

**ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ:** Û²Û· Ø¯ÛŒ Û±Û´Û°Û´  
**ÙˆØ¶Ø¹ÛŒØª:** âœ… Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø¬Ø±Ø§  
**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§:** Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† + ØªÙ„Ú¯Ø±Ø§Ù… (Ø§ØªØµØ§Ù„ Ø®ÙˆØ¯Ú©Ø§Ø±)  
**Ù†Ú©ØªÙ‡ Ú©Ù„ÛŒØ¯ÛŒ:** Ù‡Ø± Ø®ÙˆØ¯Ø±Ùˆ `interval_days` Ù…Ø®ØµÙˆØµ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø§Ø±Ø¯
>>>>>>> 8575c66 (feat: add GroupedSelect component for enhanced service and expense category selection)
